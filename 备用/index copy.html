<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»¿æºå†œä¸š - æ™ºæ…§å†œä¸šä¿¡æ¯å¹³å°</title>
    <link rel="stylesheet" href="./Control_file/style.css">
</head>
<body>

    <header>
        <div class="logo">ğŸŒ¿ å†œä¸šèµ„æºåº“</div>
        <nav>
            <a href="#">é¦–é¡µ</a>
            <a href="#">è”¬èœ</a>
            <a href="#">å¤§ç”°ä½œç‰©</a>
            <a href="#">ç—…è™«å®³</a>
            <a href="#">è‚¥æ–™</a>
            <a href="#">è¯å“</a>
        </nav>
    </header>

    <section class="hero">
        <h1>æ¢ç´¢å†œä¸šæ–°çŸ¥ï¼ŒåŠ©åŠ›ä¹¡æ‘æŒ¯å…´</h1>
        <p>æœç´¢ä½œç‰©ã€ç—…è™«å®³æ–¹æ¡ˆæˆ–ä»Šæ—¥å†œäº§å“ä»·æ ¼</p>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="å°è¯•è¾“å…¥ï¼šæ°´ç¨»ç§æ¤æŠ€æœ¯ã€è‹¹æœä»·æ ¼...">
            <button onclick="handleSearch()">æœç´¢</button>
        </div>
    </section>

    <main class="main-content">
        <h2>çƒ­é—¨æ¨è</h2>
        <div class="grid">
            <div class="card">
                <img src="https://images.unsplash.com/photo-1523348837708-15d4a09cfac2?auto=format&fit=crop&w=500&q=60" alt="è”¬èœ">
                <div class="card-body">
                    <h3>æœ‰æœºè”¬èœç§æ¤</h3>
                    <p>äº†è§£å¦‚ä½•ä¸ä½¿ç”¨åŒ–å­¦å†œè¯ç§æ¤é«˜å“è´¨è”¬èœã€‚</p>
                </div>
            </div>
            <div class="card">
                <img src="https://images.unsplash.com/photo-1592982537447-6f2a6a0c7c18?auto=format&fit=crop&w=500&q=60" alt="çŒæº‰">
                <div class="card-body">
                    <h3>æ™ºæ…§çŒæº‰ç³»ç»Ÿ</h3>
                    <p>èŠ‚æ°´50%ä»¥ä¸Šçš„ä¼ æ„Ÿå™¨æ§åˆ¶æŠ€æœ¯ä»‹ç»ã€‚</p>
                </div>
            </div>
            <div class="card">
                <img src="https://images.unsplash.com/photo-1464226184884-fa280b87c399?auto=format&fit=crop&w=500&q=60" alt="å¸‚åœº">
                <div class="card-body">
                    <h3>ä»Šæ—¥ä»·æ ¼è¡Œæƒ…</h3>
                    <p>å…¨å›½ä¸»è¦å†œäº§å“æ‰¹å‘å¸‚åœºå®æ—¶ä»·æ ¼æ±‡æ€»ã€‚</p>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2026 ç»¿æºå†œä¸šä¿¡æ¯å¹³å° | å†œä¸šç§‘æŠ€æ”¹å˜ç”Ÿæ´»</p>
    </footer>

    <script>
        async function handleSearch() {
    // 1. è·å–è¾“å…¥æ¡†çš„å†…å®¹
    const query = document.getElementById('searchInput').value.trim();
    // 2. è·å–ä¸‹æ–¹å‡†å¤‡æ˜¾ç¤ºå¡ç‰‡çš„å®¹å™¨
    const resultsContainer = document.querySelector('.grid');

    if (!query) {
        alert('è¯·è¾“å…¥æœç´¢å†…å®¹');
        return;
    }

    try {
        // 3. å‘ä½ çš„ Python åç«¯å‘é€è¯·æ±‚ (ç¡®ä¿æ­¤æ—¶ app.py æ­£åœ¨è¿è¡Œ)
        const response = await fetch(`http://127.0.0.1:5000/api/search?q=${encodeURIComponent(query)}`);
        const data = await response.json();

        // 4. æ¸…ç©ºé¡µé¢ä¸Šç°æœ‰çš„â€œçƒ­é—¨æ¨èâ€å†…å®¹
        resultsContainer.innerHTML = '';

        if (data.length === 0) {
            resultsContainer.innerHTML = `<p style="grid-column: 1/-1; text-align: center; padding: 50px;">
                æœªèƒ½æ‰¾åˆ°ä¸ "${query}" ç›¸å…³çš„ç»“æœï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯ã€‚</p>`;
            return;
        }

        // 5. å°†åç«¯è¿”å›çš„æ•°æ®æ¸²æŸ“æˆå¡ç‰‡
        data.forEach(item => {
            resultsContainer.innerHTML += `
                <div class="card">
                    <img src="${item.img}" alt="${item.name}" onerror="this.src='https://via.placeholder.com/500x300?text=æ— å›¾ç‰‡'">
                    <div class="card-body">
                        <span style="color: #2e7d32; font-size: 0.8rem; font-weight: bold;">${item.category}</span>
                        <h3 style="margin: 5px 0;">${item.name}</h3>
                        <p>${item.desc}</p>
                    </div>
                </div>
            `;
        });
    } catch (error) {
        console.error('æœç´¢å¤±è´¥:', error);
        alert('æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡å™¨ï¼Œè¯·æ£€æŸ¥ Python ç¨‹åºæ˜¯å¦æ­£åœ¨è¿è¡Œï¼ˆç«¯å£ 5000ï¼‰ã€‚');
    }
}
    </script>
</body>
</html>